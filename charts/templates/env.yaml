---
{{- with .Values.environment }}
{{- with .secrets }}
apiVersion: v1
kind: Secret
metadata:
  namespace: {{ $.Values.namespace }}
  name: {{ $.Values.app_name }}-env
type: Opaque
stringData:
  SECRET_KEY: "{{ .SECRET_KEY }}"
{{- end }}
---
{{- with .variables }}
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: {{ $.Values.namespace }}
  name: {{ $.Values.app_name }}-env
data:
  ENV: "{{ .ENV }}"
  DEBUG: "{{ .DEBUG }}"
  TESTING: "{{ .TESTING }}"
  DTT_SERVICE_URL: "{{ .DTT_SERVICE_URL }}"
  VERSION: "{{ .VERSION }}"
{{- end }}
{{- end }}